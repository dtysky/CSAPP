# 2-数的表示与运算-习题

所有有代码的练习都以以题号为名字的单个文件内。  

代码位于[CSAPP-Chapter2](https://github.com/dtysky/CSAPP/tree/master/CSAPP/Chapter2)内。

### 17

基础计算，略过。  

### 18

A: 0b0000000110111000 = 440  
B: 0b0000000000010100 = 20  
C: 0b1111111001011000 = - (0b0000000110100111 + 1) = -424  
......  

### 19

将十进制的二进制补码表示按照二进制无符号数解释即可。

### 20

比如对于`-8`，其补码为`1000`，位宽`w = 4`，所以，补码转换为无符号数的结果为`$-8 + 2^4 = 8$`，结果和直接将二进制解释为无符号数时一致。  

### 21

只需要注意有符号数和无符号是在计算式会被隐式转换为无符号数即可。  

### 22

对于A：  

$$x = -1 \* 2^3 + 1 \* 2 + 1 \* 1 = -5$$  

对于其他也一样。  

### 23

`fun1`先对`word`左移24位，再逻辑右移24位，之后转换为有符号数。  
`fun2`先将`word`转换为有符号数，之后左移24位，再算术右移24位。  

|w|fun1(2)|fun2(w)|
|-|-------|-------|
|0x00000076|0x00000076|0x00000076|
|0x87654321|0x00000021|0x00000021|
|0x000000c9|0x000000c9|0xffffffc9|
|0xedcba987|0x00000087|0xffffff87|

### 24

位级去掉最高位，将剩余解释为有符号或者无符号数即可。  

### 25

详见代码。  

当数组长度为0时，由于`length`为无符号数，所以`length - 1`语句将得到一个无符号数的结果，在32bits的机器上，此结果为`0xffffffff`对应的无符号数，是一个很大的正数。所以在循环时，会有数组越界发生，即访问未初始化的存储区域，发生错误。  

将`i <= length - 1`改为`i < length`可破。

### 26

详见代码。  

`size_t`为无符号数，`s`与`t`的长度的相减也会的到一个无符号结果，这使得改结果与0相比较大或相等，无法得到正确结果。  
将相减后与0比较直接改为两个长度相比较即可。  

### 27

比较x + y 和 x（或y）的大小即可。

### 28

套公式，略过。  

### 29

基础计算，跳过。  

### 30

详见代码。  

溢出只有可能在`x`和`y`同号时出现，都为正时可能发生正溢出，即最终和为负，都为负时则可能发生负溢出，即和最终为正。

### 31

溢出是可逆的，即便`sum`溢出了，但`sum - x = y`却还是成立的。  

### 32

因为补码的值域不是关于y轴对称的，所以当`y`为`INT_MIN`时，`-y`会直接发生溢出，变为`y`，此时如果`x`为0，题目所示的函数将不会认为溢出，但实际上已经溢出了。  

在原先的代码加一个分支即可。

### 33

0xF的补码是其自身，其他都是相反数。  

